<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:inf="clr-namespace:ClipMate.Infrastructure">

    <!--  Favorite Star Style  -->
    <Style x:Key="FavoriteStarStyle" TargetType="Path">
        <Setter Property="Grid.Column" Value="1" />
        <Setter Property="Width" Value="12" />
        <Setter Property="Height" Value="12" />
        <Setter Property="Margin" Value="5,0,0,0" />
        <Setter Property="VerticalAlignment" Value="Top" />
        <Setter Property="Data" Value="{StaticResource StarGeometry}" />
        <Setter Property="Fill" Value="{DynamicResource FavoriteStarColor}" />
        <Setter Property="Stretch" Value="Uniform" />
    </Style>

    <!--  PlainText DataTemplate  -->
    <DataTemplate x:Key="PlainTextTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBlock
                Grid.Column="0"
                MaxHeight="{Binding DataContext.ClipboardItemMaxHeight, RelativeSource={RelativeSource AncestorType=ListView}}"
                Text="{Binding TextContent}"
                TextTrimming="CharacterEllipsis"
                TextWrapping="Wrap">
                <TextBlock.ToolTip>
                    <ToolTip MaxWidth="400">
                        <StackPanel>
                            <TextBlock Text="{Binding TextContent}" TextWrapping="Wrap" />
                            <Separator Margin="0,5" />
                            <TextBlock
                                FontSize="11"
                                Foreground="Gray"
                                Text="{Binding Value.CreatedAt, StringFormat='创建时间: {0}'}" />
                            <TextBlock
                                FontSize="11"
                                Foreground="Gray"
                                Text="{Binding TextContent.Length, StringFormat='字符数: {0}'}" />
                        </StackPanel>
                    </ToolTip>
                </TextBlock.ToolTip>
            </TextBlock>
            <Path Style="{StaticResource FavoriteStarStyle}" Visibility="{Binding IsFavorite, Converter={StaticResource BooleanToVisibilityConverter}}" />
        </Grid>
    </DataTemplate>

    <!--  RichText DataTemplate  -->
    <DataTemplate x:Key="RichTextTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <RichTextBox
                Grid.Column="0"
                MaxHeight="{Binding DataContext.ClipboardItemMaxHeight, RelativeSource={RelativeSource AncestorType=ListView}}"
                IsReadOnly="True">
                <RichTextBox.ToolTip>
                    <ToolTip MaxWidth="600">
                        <StackPanel>
                            <TextBlock
                                Margin="0,0,0,10"
                                Text="{Binding Content}"
                                TextWrapping="Wrap" />
                            <Separator Margin="0,5" />
                            <TextBlock
                                FontSize="11"
                                Foreground="Gray"
                                Text="{Binding Value.CreatedAt, StringFormat='创建时间: {0}'}" />
                            <TextBlock
                                FontSize="11"
                                Foreground="Gray"
                                Text="{Binding Value.ContentType, StringFormat='类型: {0}'}" />
                        </StackPanel>
                    </ToolTip>
                </RichTextBox.ToolTip>
                <FlowDocument>
                    <Paragraph>
                        <Run Text="{Binding Content}" />
                    </Paragraph>
                </FlowDocument>
            </RichTextBox>
            <Path Style="{StaticResource FavoriteStarStyle}" Visibility="{Binding IsFavorite, Converter={StaticResource BooleanToVisibilityConverter}}" />
        </Grid>
    </DataTemplate>

    <!--  Image DataTemplate  -->
    <DataTemplate x:Key="ImageTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Image
                Grid.Column="0"
                Height="{Binding DataContext.ClipboardItemMaxHeight, RelativeSource={RelativeSource AncestorType=ListView}}"
                Source="{Binding ImageContent}">
                <Image.ToolTip>
                    <ToolTip MaxWidth="600">
                        <StackPanel>
                            <Image
                                MaxWidth="500"
                                MaxHeight="400"
                                Margin="0,0,0,10"
                                Source="{Binding ImageContent}"
                                Stretch="Uniform" />
                            <Separator Margin="0,5" />
                            <TextBlock
                                FontSize="11"
                                Foreground="Gray"
                                Text="{Binding Value.CreatedAt, StringFormat='创建时间: {0}'}" />
                            <TextBlock
                                FontSize="11"
                                Foreground="Gray"
                                Text="{Binding Value.ContentType, StringFormat='类型: {0}'}" />
                        </StackPanel>
                    </ToolTip>
                </Image.ToolTip>
            </Image>
            <Path Style="{StaticResource FavoriteStarStyle}" Visibility="{Binding IsFavorite, Converter={StaticResource BooleanToVisibilityConverter}}" />
        </Grid>
    </DataTemplate>

    <!--  File DataTemplate  -->
    <DataTemplate x:Key="FileTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBlock
                Grid.Column="0"
                MaxHeight="{Binding DataContext.ClipboardItemMaxHeight, RelativeSource={RelativeSource AncestorType=ListView}}"
                Text="{Binding Summary}"
                TextTrimming="CharacterEllipsis"
                TextWrapping="Wrap">
                <TextBlock.ToolTip>
                    <ToolTip MaxWidth="500">
                        <StackPanel>
                            <ItemsControl ItemsSource="{Binding FilePathList}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding}" TextWrapping="Wrap" />
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                            <Separator Margin="0,5" />
                            <TextBlock
                                FontSize="11"
                                Foreground="Gray"
                                Text="{Binding Value.CreatedAt, StringFormat='创建时间: {0}'}" />
                            <TextBlock
                                FontSize="11"
                                Foreground="Gray"
                                Text="{Binding Value.ContentType, StringFormat='类型: {0}'}" />
                        </StackPanel>
                    </ToolTip>
                </TextBlock.ToolTip>
            </TextBlock>
            <Path Style="{StaticResource FavoriteStarStyle}" Visibility="{Binding IsFavorite, Converter={StaticResource BooleanToVisibilityConverter}}" />
        </Grid>
    </DataTemplate>

    <!--  DataTemplateSelector  -->
    <inf:ClipboardItemTemplateSelector
        x:Key="ClipboardItemTemplateSelector"
        FileTemplate="{StaticResource FileTemplate}"
        ImageTemplate="{StaticResource ImageTemplate}"
        PlainTextTemplate="{StaticResource PlainTextTemplate}" />
</ResourceDictionary>
