<Application
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:clipboard="clr-namespace:ClipMate.Presentation.Clipboard;assembly=ClipMate.UI"
    xmlns:avaloniaClipboard="clr-namespace:ClipMate.Presentation.Clipboard"
    xmlns:fluent="clr-namespace:Avalonia.Themes.Fluent;assembly=Avalonia.Themes.Fluent"
    xmlns:local="clr-namespace:ClipMate.Avalonia"
    x:Class="ClipMate.Avalonia.App">
  <Application.Styles>
    <fluent:FluentTheme />
    <StyleInclude Source="avares://ClipMate.Avalonia/Themes/Styles.axaml" />
  </Application.Styles>

  <Application.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceInclude Source="avares://ClipMate.Avalonia/Themes/Converters.axaml" />
      </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </Application.Resources>

  <Application.DataTemplates>
    <DataTemplate DataType="clipboard:TextClipboard">
      <Border Margin="4" Padding="8" Classes="clipmate-item" CornerRadius="6" BoxShadow="0 2 6 0 #22000000">
        <ToolTip.Tip>
          <StackPanel MaxWidth="520" Spacing="6">
            <TextBlock Text="{Binding TextContent}" TextWrapping="Wrap" />
            <TextBlock
              FontSize="11"
              Foreground="{DynamicResource ClipMateMutedTextBrush}"
              Text="{Binding Value.CreatedAt, StringFormat='创建时间: {0}'}" />
          </StackPanel>
        </ToolTip.Tip>
        <Grid ColumnDefinitions="*,Auto">
          <TextBlock
            Grid.Column="0"
            Text="{Binding TextContent}"
            TextWrapping="Wrap"
            MaxHeight="{Binding DataContext.ClipboardItemMaxHeight, RelativeSource={RelativeSource AncestorType=ListBox}}" />
          <TextBlock
            Grid.Column="1"
            Text="★"
            Margin="8,0,0,0"
            FontSize="18"
            Foreground="{DynamicResource ClipMateAccentBrush}"
            IsVisible="{Binding IsFavorite}" />
        </Grid>
      </Border>
    </DataTemplate>

    <DataTemplate DataType="avaloniaClipboard:ImageClipboard">
      <Border Margin="4" Padding="8" Classes="clipmate-item" CornerRadius="6" BoxShadow="0 2 6 0 #22000000">
        <ToolTip.Tip>
          <StackPanel MaxWidth="520" Spacing="6">
            <TextBlock Text="{Binding Summary}" />
            <TextBlock
              FontSize="11"
              Foreground="{DynamicResource ClipMateMutedTextBrush}"
              Text="{Binding Value.CreatedAt, StringFormat='创建时间: {0}'}" />
          </StackPanel>
        </ToolTip.Tip>
        <Grid ColumnDefinitions="*,Auto">
          <Image
            Grid.Column="0"
            Source="{Binding ImageContent}"
            Height="{Binding DataContext.ClipboardItemMaxHeight, RelativeSource={RelativeSource AncestorType=ListBox}}"
            Stretch="Uniform" />
          <TextBlock
            Grid.Column="1"
            Text="★"
            Margin="8,0,0,0"
            FontSize="18"
            Foreground="{DynamicResource ClipMateAccentBrush}"
            IsVisible="{Binding IsFavorite}" />
        </Grid>
      </Border>
    </DataTemplate>

    <DataTemplate DataType="clipboard:FileDropListClipboard">
      <Border Margin="4" Padding="8" Classes="clipmate-item" CornerRadius="6" BoxShadow="0 2 6 0 #22000000">
        <ToolTip.Tip>
          <StackPanel MaxWidth="520" Spacing="6">
            <ItemsControl ItemsSource="{Binding FilePathList}">
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <TextBlock Text="{Binding}" TextWrapping="Wrap" />
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>
            <TextBlock
              FontSize="11"
              Foreground="{DynamicResource ClipMateMutedTextBrush}"
              Text="{Binding Value.CreatedAt, StringFormat='创建时间: {0}'}" />
          </StackPanel>
        </ToolTip.Tip>
        <Grid ColumnDefinitions="*,Auto">
          <TextBlock
            Grid.Column="0"
            Text="{Binding Summary}"
            TextWrapping="Wrap"
            MaxHeight="{Binding DataContext.ClipboardItemMaxHeight, RelativeSource={RelativeSource AncestorType=ListBox}}" />
          <TextBlock
            Grid.Column="1"
            Text="★"
            Margin="8,0,0,0"
            FontSize="18"
            Foreground="{DynamicResource ClipMateAccentBrush}"
            IsVisible="{Binding IsFavorite}" />
        </Grid>
      </Border>
    </DataTemplate>
  </Application.DataTemplates>
</Application>
